<!--import [polymer, iron-icons, iron-icons/av-icons, iron-flex-layout, paper-button, etools-content-panel, paper-button,
            paper-menu-button, paper-icon-button, paper-menu, paper-item, moment-element/moment-import]-->

<!--import [permission-controller, common-methods-behavior, action-buttons, insert-html]-->

<dom-module id="status-tab-element">
    <template>
        <!-- inject styles './status-tab-element.scss'-->
        <style include="module-styles"></style>

        <etools-content-panel panel-title="Status">
            <div class="status-list" id="statusList">
                <div class="cancelled-status" id="cancelledStatus" hidden$="[[!cancelled]]">
                    <div class="divider cancelled">
                        <div class="status-divider"></div>
                    </div>

                    <div class="status-container cancelled">
                        <div class="status-icon">
                            <span class="icon-wrapper">
                                <iron-icon icon="cancel"></iron-icon>
                            </span>
                        </div>

                        <div class$="status [[statusStates.canceled.class]]">
                            <span class="status-header">
                                <insert-html html="[[statusStates.cancelled.statusText]]"></insert-html>
                            </span>
                            <span class="status-date">{{_getFormattedDate('date_of_cancel', engagementData.date_of_cancel)}}</span>
                        </div>
                    </div>
                </div>

                <div class$="status-container first [[_getStatusState(1, engagementData)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(1, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.partner_contacted.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.partner_contacted.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('partner_contacted_at', engagementData.partner_contacted_at)}}</span>
                    </div>
                </div>

                <div class="divider">
                    <div class="status-divider"></div>
                </div>

                <div class$="status-container [[_getStatusState(2, engagementData.date_of_field_visit)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(2, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.field_visit.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.field_visit.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('date_of_field_visit', engagementData.date_of_field_visit)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(3, engagementData.date_of_field_visit, engagementData.date_of_draft_report_to_ip)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(3, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.draft_issued_to_partner.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.draft_issued_to_partner.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('date_of_draft_report_to_ip', engagementData.date_of_draft_report_to_ip)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(4, engagementData.date_of_draft_report_to_ip, engagementData.date_of_comments_by_ip)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(4, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.comments_received_by_partner.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.comments_received_by_partner.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('date_of_comments_by_ip', engagementData.date_of_comments_by_ip)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(5, engagementData.date_of_comments_by_ip, engagementData.date_of_draft_report_to_unicef)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(5, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.draft_issued_to_unicef.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.draft_issued_to_unicef.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('date_of_draft_report_to_unicef', engagementData.date_of_draft_report_to_unicef)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(6, engagementData.date_of_draft_report_to_unicef, engagementData.date_of_comments_by_unicef)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(6, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.comments_received_by_unicef.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.comments_received_by_unicef.statusText]]"></insert-html>
                        </span>
                        <span class="status-date">{{_getFormattedDate('date_of_comments_by_unicef', engagementData.date_of_comments_by_unicef)}}</span>
                    </div>
                </div>

                <div class="divider"><div class="status-divider"></div></div>

                <div class$="status-container [[_getStatusState(8, engagementData)]]">
                    <div class="status-icon">
                        <span class="icon-wrapper">
                            <span class="status-nr">[[_refactorStatusNumber(7, engagementData.status)]]</span>
                            <iron-icon icon="check"></iron-icon>
                        </span>
                    </div>

                    <div class$="status [[statusStates.final.class]]">
                        <span class="status-header">
                            <insert-html html="[[statusStates.final.statusText]]"></insert-html>
                        </span>
                    </div>
                </div>
            </div>

            <template is="dom-if" if="{{_showActionButtons(actions)}}">
                <div class="status-buttons">
                   <action-buttons actions="{{actions}}"></action-buttons>
                </div>
            </template>
        </etools-content-panel>
    </template>

    <!-- inject scripts './status-tab-element.js'-->
</dom-module>
